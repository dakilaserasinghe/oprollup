<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2099" height="1869"><desc>title%20Optimistic%20Rollup%20Architecture%20Draft%20V0.0.3%0A%0Aparticipant%20Alice%0Aparticipant%20Bob%0Aparticipant%20Smart%20Contract%0Aparticipant%20Sequencer%0Aparticipant%20Verifier%0A%0A%0A%0AAlice-%3ESmart%20Contract%3Adeposit%20ETH%20**deposit()**%20(L1)%0ASmart%20Contract-%3ESequencer%3A%20emit%20**Deposit()**%0A%0ABob-%3ESmart%20Contract%3A%20deposit%20ETH%20**deposit()**%20(L1)%0ASmart%20Contract-%3ESequencer%3A%20emit%20**Deposit()**%0A%0A%0Anote%20left%20of%20Smart%20Contract%3Aafter%20few%20mins%20balances%20available%20in%20L2%0A%0AAlice--%3E%3ESequencer%3A%20transfer%20money%20**transfer(_to%2C%20_amount)**%20(L2)%0ASequencer--%3E%3EAlice%3A%20Response%20with%20Tx%20**PENDING**%20state%0A%0ABob--%3E%3ESequencer%3A%20transfer%20money%20**transfer(_to%2C%20_amount)**%20(L2)%0ASequencer--%3E%3EBob%3A%20Response%20with%20Tx%20**PENDING**%20state%0A%0A%0Anote%20over%20Sequencer%3A%20Lock%20Tx%20Block%0Anote%20over%20Sequencer%3A%20Sequencer%20get%20the%20transactions%20in%20the%20mempool%20as%20recieved%3B%0Anote%20over%20Sequencer%3A%201.%20Validate%20Txs.%0ABob--%3E%3ESequencer%3A%20check%20Tx%20status%20**status(_txId)**%20(L2)%0ASequencer--%3E%3EBob%3A%20Response%20with%20Tx%20**ACCEPTED_IN_L2**%20state%3A%20soft%20finality%0A%0Anote%20over%20Sequencer%3A%202.%20Sequence%20Txs.%0Anote%20over%20Sequencer%3A%203.%20Execute%20Txs.%0Anote%20over%20Sequencer%3A%204.%20Generate%20the%20State%20Root%20(Merkle%20Tree).%0A%0ASequencer-%3ESmart%20Contract%3A%20Sequenced%20Batch%20Submission.%20Compressed%20Txs%2C%20Intermediate%20State%20Roots%2C%20transaction%20Root%2C%20State%20Root%20and%20Intermediate%20State%20roots'%20Root.%0A%0ASmart%20Contract-%3EVerifier%3A%20emit%20SequencedBatch()%20with%20batch%20Id.%0A%0Anote%20left%20of%20Verifier%3A%20Verifier%20listens%20to%20the%20'SequencedBatch'%20event.%20Extracts%20calldata%20for%20transaction.%0Anote%20left%20of%20Verifier%3A%20Verifier%20decompress%20the%20Tx%20bundle%20then%20execute%20them%20in%20the%20order%2C%5Cn%20against%20intermediate%20state%20roots.%0Anote%20left%20of%20Verifier%3A%20If%20he%20finds%20a%20malicious%20Tx%20aka%20a%20different%20State%20Root%2C%5Cn%20he%20challenge%20the%20submitted%20block%20by%20the%20sequencer.%0ASmart%20Contract%3C-Verifier%3A%20Challenge%20**challenge(_newStateRoot%2C%20_balances%2C%20_tx)**%0Anote%20over%20Smart%20Contract%3A%20Smart%20Contract%20recreate%20the%20State%20Root%20with%20_balances%20and%20_txs%0A%0ASmart%20Contract-%3ESequencer%3A%20emit%20Resolution(Correct%20State%20Root)%0ASmart%20Contract-%3EVerifier%3A%20emit%20Resolution(Correct%20State%20Root)%0A%0AAlice--%3E%3ESequencer%3A%20Withdraw%20money%20**withdraw(_amount)**%0ASequencer-%3ESmart%20Contract%3A%20Sequenced%20Batch%20Submission%0A%0AAlice--%3E%3ESequencer%3A%20get%20withdrawal%20proof%20**getProof(txId)**%0AAlice%3C%3C--Sequencer%3A%20returns%20txHash%20and%20Proof%20for%20it.%0Anote%20left%20of%20Sequencer%3A%20After%20a%20successful%20challenge%20period%20the%20batch%5Cn%20inclusive%20of%20Alice's%20withdrawal%20gets%20finalized%20in%20L1.%0AAlice-%3ESmart%20Contract%3A%20withdraw%20from%20L1%20**withdraw(_txHash%2C%20_proof)**%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="2099" height="1869"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="843.8804600435958" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Optimistic Rollup Architecture Draft V0.0.3</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 95.887643371 L 41.77890099026563 1869.890721751" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 95.887643371 L 213.44462432744012 1869.890721751" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 95.887643371 L 527.3221535813072 1869.890721751" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 95.887643371 L 1479.006780187297 1869.890721751" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2051.0945602956563 95.887643371 L 2051.0945602956563 1869.890721751" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 51.782594461 L 75.39020033053126 51.782594461 L 75.39020033053126 95.887643371 L 8.167601650000002 95.887643371 L 8.167601650000002 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.891297230500008" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 182.67870004820966 51.782594461 L 244.2105486066706 51.782594461 L 244.2105486066706 95.887643371 L 182.67870004820966 95.887643371 L 182.67870004820966 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="200.40239562870966" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 460.31071538606113 51.782594461 L 594.3335917765534 51.782594461 L 594.3335917765534 95.887643371 L 460.31071538606113 95.887643371 L 460.31071538606113 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="478.03441096656115" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Smart Contract</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1425.8285557982033 51.782594461 L 1532.1850045763908 51.782594461 L 1532.1850045763908 95.887643371 L 1425.8285557982033 95.887643371 L 1425.8285557982033 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1443.5522513787032" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2010.5577162166212 51.782594461 L 2091.6314043746916 51.782594461 L 2091.6314043746916 95.887643371 L 2010.5577162166212 95.887643371 L 2010.5577162166212 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2028.281411797121" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier</text></g></g><g><g><g><rect fill="white" stroke="none" x="193.71444356813018" y="128.558049971" width="181.6721674353125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.16472406313017" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit ETH </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="280.9034325592239" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="342.79318780824735" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 149.793814261 L 513.8728361976406 149.793814261" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,149.793814261) translate(-527.3221535813072,-149.793814261)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 513.7094841646406 142.98747955266666 L 527.3221535813072 149.793814261 L 513.7094841646406 156.60014896933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="953.0692431519974" y="174.296619211" width="100.19044746460938" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="955.5195236469974" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="987.2875900532474" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Deposit()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 195.532383501 L 1465.5574628036302 195.532383501" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1479.006780187297,195.532383501) translate(-1479.006780187297,-195.532383501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1465.3941107706303 188.72604879266666 L 1479.006780187297 195.532383501 L 1465.3941107706303 202.33871820933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="279.5473052367174" y="220.035188451" width="181.6721674353125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="281.99758573171744" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit ETH </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="366.7362942278112" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="428.6260494768346" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 241.270952741 L 513.8728361976406 241.270952741" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,241.270952741) translate(-527.3221535813072,-241.270952741)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 513.7094841646406 234.46461803266666 L 527.3221535813072 241.270952741 L 513.7094841646406 248.07728744933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="953.0692431519974" y="265.77375769099996" width="100.19044746460938" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="955.5195236469974" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="987.2875900532474" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Deposit()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 287.009521981 L 1465.5574628036302 287.009521981" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1479.006780187297,287.009521981) translate(-1479.006780187297,-287.009521981)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1465.3941107706303 280.20318727266664 L 1479.006780187297 287.009521981 L 1465.3941107706303 293.8158566893333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 330.29781072599997 L 519.1545519313072 330.29781072599997 M 221.61222597744006 311.51232693099996 L 504.4528689613072 311.51232693099996 L 519.1545519313072 326.21400990099994 L 519.1545519313072 349.08329452099997 L 221.61222597744006 349.08329452099997 L 221.61222597744006 311.51232693099996 M 504.4528689613072 311.51232693099996 L 504.4528689613072 326.21400990099994 L 519.1545519313072 326.21400990099994" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="244.4815105974401" y="334.38161155099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">after few mins balances available in L2</text></g><g><g><rect fill="white" stroke="none" x="614.1595019272773" y="373.58609947099995" width="292.4666773230078" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="616.6097824222774" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer money </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="718.4565536625117" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer(_to, _amount)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="874.0327560550899" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 394.821863761 L 1476.964879774797 394.821863761" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1479.006780187297,394.821863761) translate(-1479.006780187297,-394.821863761)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1465.0115358042428 388.5784662753765 L 1477.4764803217474 394.821863761 L 1465.0115358042428 401.06526124662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="646.324823277375" y="419.32466871099996" width="228.1360346228125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="648.775103772375" y="434.02635168099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with Tx </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="769.3620483524531" y="434.02635168099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PENDING</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="836.1551849491328" y="434.02635168099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> state</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 440.560433001 L 43.82080140276563 440.560433001" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(41.77890099026563,440.560433001) translate(-41.77890099026563,-440.560433001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 55.77414537331967 434.3170355153765 L 43.309200855815114 440.560433001 L 55.77414537331967 446.80383048662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="699.9923635958646" y="465.06323795099996" width="292.4666773230078" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="702.4426440908646" y="479.76492092099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer money </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="804.289415331099" y="479.76492092099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer(_to, _amount)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="959.8656177236771" y="479.76492092099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 486.299002241 L 1476.964879774797 486.299002241" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1479.006780187297,486.299002241) translate(-1479.006780187297,-486.299002241)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1465.0115358042428 480.0556047553765 L 1477.4764803217474 486.299002241 L 1465.0115358042428 492.54239972662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="732.1576849459623" y="510.80180719099997" width="228.1360346228125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="734.6079654409623" y="525.503490161" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with Tx </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="855.1949100210404" y="525.503490161" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PENDING</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="921.9880466177201" y="525.503490161" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> state</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 532.037571481 L 215.48652473994014 532.037571481" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(213.44462432744012,532.037571481) translate(-213.44462432744012,-532.037571481)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 227.43986871049418 525.7941739953766 L 214.9749241929896 532.037571481 L 227.43986871049418 538.2809689666234" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1410.5147538680783 556.5403764309999 L 1532.7971235365158 556.5403764309999 L 1547.4988065065158 571.2420594009999 L 1547.4988065065158 594.1113440209999 L 1410.5147538680783 594.1113440209999 L 1410.5147538680783 556.5403764309999 M 1532.7971235365158 556.5403764309999 L 1532.7971235365158 571.2420594009999 L 1547.4988065065158 571.2420594009999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1433.3840384880782" y="579.409661051" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Lock Tx Block</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1260.9658036727658 618.6141489709998 L 1682.3460737318283 618.6141489709998 L 1697.0477567018283 633.3158319409998 L 1697.0477567018283 656.1851165609999 L 1260.9658036727658 656.1851165609999 L 1260.9658036727658 618.6141489709998 M 1682.3460737318283 618.6141489709998 L 1682.3460737318283 633.3158319409998 L 1697.0477567018283 633.3158319409998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1283.8350882927657" y="641.4834335909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer get the transactions in the mempool as recieved;</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1406.1625657577267 680.6879215109998 L 1537.1493116468673 680.6879215109998 L 1551.8509946168674 695.3896044809998 L 1551.8509946168674 718.2588891009998 L 1406.1625657577267 718.2588891009998 L 1406.1625657577267 680.6879215109998 M 1537.1493116468673 680.6879215109998 L 1537.1493116468673 695.3896044809998 L 1551.8509946168674 695.3896044809998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1429.0318503777266" y="703.5572061309998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Validate Txs.</text></g><g><g><rect fill="white" stroke="none" x="732.1684576510404" y="742.7616940509997" width="228.11448921265625" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="734.6187381460404" y="757.4633770209997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check Tx status </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="840.5313663198685" y="757.4633770209997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">status(_txId)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="927.6895236685014" y="757.4633770209997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 763.9974583409997 L 1476.964879774797 763.9974583409997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1479.006780187297,763.9974583409997) translate(-1479.006780187297,-763.9974583409997)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1465.0115358042428 757.7540608553763 L 1477.4764803217474 763.9974583409997 L 1465.0115358042428 770.2408558266231" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="662.4977194308256" y="788.5002632909997" width="367.4559656530859" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="664.9479999258256" y="803.2019462609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with Tx </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="785.5349445059037" y="803.2019462609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ACCEPTED_IN_L2</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="914.2464770986771" y="803.2019462609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> state: soft finality</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 809.7360275809997 L 215.48652473994014 809.7360275809997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(213.44462432744012,809.7360275809997) translate(-213.44462432744012,-809.7360275809997)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 227.43986871049418 803.4926300953763 L 214.9749241929896 809.7360275809997 L 227.43986871049418 815.9794250666231" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1399.0938478011838 834.2388325309996 L 1544.2180296034103 834.2388325309996 L 1558.9197125734104 848.9405155009996 L 1558.9197125734104 871.8098001209996 L 1399.0938478011838 871.8098001209996 L 1399.0938478011838 834.2388325309996 M 1544.2180296034103 834.2388325309996 L 1544.2180296034103 848.9405155009996 L 1558.9197125734104 848.9405155009996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1421.9631324211837" y="857.1081171509996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. Sequence Txs.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1405.6221223373166 896.3126050709996 L 1537.6897550672775 896.3126050709996 L 1552.3914380372776 911.0142880409995 L 1552.3914380372776 933.8835726609996 L 1405.6221223373166 933.8835726609996 L 1405.6221223373166 896.3126050709996 M 1537.6897550672775 896.3126050709996 L 1537.6897550672775 911.0142880409995 L 1552.3914380372776 911.0142880409995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1428.4914069573165" y="919.1818896909996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. Execute Txs.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1320.7438340682736 958.3863776109995 L 1622.5680433363204 958.3863776109995 L 1637.2697263063205 973.0880605809995 L 1637.2697263063205 995.9573452009995 L 1320.7438340682736 995.9573452009995 L 1320.7438340682736 958.3863776109995 M 1622.5680433363204 958.3863776109995 L 1622.5680433363204 973.0880605809995 L 1637.2697263063205 973.0880605809995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1343.6131186882735" y="981.2556622309995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. Generate the State Root (Merkle Tree).</text></g><g><g><rect fill="white" stroke="none" x="546.652144152974" y="1020.4601501509995" width="913.0246454626563" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="549.102424647974" y="1035.1618331209995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequenced Batch Submission. Compressed Txs, Intermediate State Roots, transaction Root, State Root and Intermediate State roots' Root.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 1041.6959144409996 L 540.7714709649739 1041.6959144409996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1041.6959144409996) translate(-527.3221535813072,-1041.6959144409996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 540.9348229979739 1034.8895797326663 L 527.3221535813072 1041.6959144409996 L 540.9348229979739 1048.5022491493328 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1164.9327819488528" y="1066.1987193909997" width="248.55114997925781" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1167.3830624438529" y="1080.9004023609998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit SequencedBatch() with batch Id.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 1087.4344836809996 L 2037.6452429119895 1087.4344836809996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(2051.0945602956563,1087.4344836809996) translate(-2051.0945602956563,-1087.4344836809996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 2037.4818908789896 1080.6281489726664 L 2051.0945602956563 1087.4344836809996 L 2037.4818908789896 1094.2408183893328 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2051.0945602956563 1130.7227724259997 L 2042.9269586456562 1130.7227724259997 M 1487.174381837297 1111.9372886309995 L 2028.2252756756561 1111.9372886309995 L 2042.9269586456562 1126.6389716009996 L 2042.9269586456562 1149.5082562209996 L 1487.174381837297 1149.5082562209996 L 1487.174381837297 1111.9372886309995 M 2028.2252756756561 1111.9372886309995 L 2028.2252756756561 1126.6389716009996 L 2042.9269586456562 1126.6389716009996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1510.043666457297" y="1134.8065732509997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier listens to the 'SequencedBatch' event. Extracts calldata for transaction.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2051.0945602956563 1200.9641466159997 L 2042.9269586456562 1200.9641466159997 M 1568.5487409681564 1174.0110611709997 L 2028.2252756756563 1174.0110611709997 L 2042.9269586456564 1188.7127441409998 L 2042.9269586456564 1227.9172320609996 L 1568.5487409681564 1227.9172320609996 L 1568.5487409681564 1174.0110611709997 M 2028.2252756756563 1174.0110611709997 L 2028.2252756756563 1188.7127441409998 L 2042.9269586456564 1188.7127441409998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1591.4180255881563" y="1196.8803457909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier decompress the Tx bundle then execute them in the order,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1591.4180255881563" y="1213.215549091" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> against intermediate state roots.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2051.0945602956563 1279.3731224559997 L 2042.9269586456562 1279.3731224559997 M 1659.7869611830001 1252.4200370109997 L 2028.2252756756563 1252.4200370109997 L 2042.9269586456564 1267.1217199809998 L 2042.9269586456564 1306.3262079009996 L 1659.7869611830001 1306.3262079009996 L 1659.7869611830001 1252.4200370109997 M 2028.2252756756563 1252.4200370109997 L 2028.2252756756563 1267.1217199809998 L 2042.9269586456564 1267.1217199809998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1682.656245803" y="1275.289321631" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If he finds a malicious Tx aka a different State Root,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1682.656245803" y="1291.624524931" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> he challenge the submitted block by the sequencer.</text></g><g><g><rect fill="white" stroke="none" x="1105.8812377593997" y="1330.8290128509998" width="366.65423835816404" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1108.3315182543997" y="1345.5306958209999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Challenge </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="1178.4245510913138" y="1345.5306958209999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">challenge(_newStateRoot, _balances, _tx)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2051.0945602956563 1352.0647771409997 L 540.7714709649739 1352.0647771409997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1352.0647771409997) translate(-527.3221535813072,-1352.0647771409997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 540.9348229979739 1345.2584424326665 L 527.3221535813072 1352.0647771409997 L 540.9348229979739 1358.871111849333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 297.06929352185415 1376.5675820909996 L 742.8733306707604 1376.5675820909996 L 757.5750136407604 1391.2692650609997 L 757.5750136407604 1414.1385496809996 L 297.06929352185415 1414.1385496809996 L 297.06929352185415 1376.5675820909996 M 742.8733306707604 1376.5675820909996 L 742.8733306707604 1391.2692650609997 L 757.5750136407604 1391.2692650609997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="319.9385781418541" y="1399.4368667109998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Smart Contract recreate the State Root with _balances and _txs</text></g><g><g><rect fill="white" stroke="none" x="884.6118685792435" y="1438.6413546309998" width="237.1051966101172" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="887.0621490742435" y="1453.3430376009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit Resolution(Correct State Root)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 1459.8771189209997 L 1465.5574628036302 1459.8771189209997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1479.006780187297,1459.8771189209997) translate(-1479.006780187297,-1459.8771189209997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1465.3941107706303 1453.0707842126665 L 1479.006780187297 1459.8771189209997 L 1465.3941107706303 1466.683453629333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1170.6557586334231" y="1484.3799238709998" width="237.1051966101172" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1173.1060391284232" y="1499.081606841" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit Resolution(Correct State Root)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 1505.6156881609998 L 2037.6452429119895 1505.6156881609998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(2051.0945602956563,1505.6156881609998) translate(-2051.0945602956563,-1505.6156881609998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 2037.4818908789896 1498.8093534526665 L 2051.0945602956563 1505.6156881609998 L 2037.4818908789896 1512.422022869333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="634.1308306626289" y="1530.118493111" width="252.5240198523047" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="636.5811111576289" y="1544.820176081" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Withdraw money </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="749.8237411625117" y="1544.820176081" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw(_amount)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 1551.3542574009998 L 1476.964879774797 1551.3542574009998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1479.006780187297,1551.3542574009998) translate(-1479.006780187297,-1551.3542574009998)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1465.0115358042428 1545.1108599153765 L 1477.4764803217474 1551.3542574009998 L 1465.0115358042428 1557.597654886623" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="902.9189517091263" y="1575.857062351" width="200.49103035035156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="905.3692322041263" y="1590.558745321" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequenced Batch Submission</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 1597.0928266409999 L 540.7714709649739 1597.0928266409999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1597.0928266409999) translate(-527.3221535813072,-1597.0928266409999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 540.9348229979739 1590.2864919326666 L 527.3221535813072 1597.0928266409999 L 540.9348229979739 1603.899161349333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="642.262567418" y="1621.595631591" width="236.2605463415625" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="644.712847913" y="1636.2973145610001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">get withdrawal proof </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="779.9812347538203" y="1636.2973145610001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getProof(txId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 1642.831395881 L 1476.964879774797 1642.831395881" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1479.006780187297,1642.831395881) translate(-1479.006780187297,-1642.831395881)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1465.0115358042428 1636.5879983953766 L 1477.4764803217474 1642.831395881 L 1465.0115358042428 1649.0747933666232" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="658.1287173203438" y="1667.334200831" width="204.528246536875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="660.5789978153438" y="1682.0358838010002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">returns txHash and Proof for it.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 1688.569965121 L 43.82080140276563 1688.569965121" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(41.77890099026563,1688.569965121) translate(-41.77890099026563,-1688.569965121)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 55.77414537331967 1682.3265676353767 L 43.309200855815114 1688.569965121 L 55.77414537331967 1694.8133626066233" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1479.006780187297 1740.025855516 L 1470.839178537297 1740.025855516 M 1099.624779219172 1713.072770071 L 1456.137495567297 1713.072770071 L 1470.8391785372971 1727.774453041 L 1470.8391785372971 1766.978940961 L 1099.624779219172 1766.978940961 L 1099.624779219172 1713.072770071 M 1456.137495567297 1713.072770071 L 1456.137495567297 1727.774453041 L 1470.8391785372971 1727.774453041" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1122.494063839172" y="1735.9420546910003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">After a successful challenge period the batch</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1122.494063839172" y="1752.2772579910004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> inclusive of Alice's withdrawal gets finalized in L1.</text></g><g><g><rect fill="white" stroke="none" x="132.21479452027862" y="1791.4817459110002" width="304.6714655310156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="134.6650750152786" y="1806.1834288810003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw from L1 </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="250.35580987855985" y="1806.1834288810003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw(_txHash, _proof)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 1812.717510201 L 513.8728361976406 1812.717510201" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1812.717510201) translate(-527.3221535813072,-1812.717510201)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 513.7094841646406 1805.9111754926669 L 527.3221535813072 1812.717510201 L 513.7094841646406 1819.5238449093333 Z"/></g></g></g><g/><g/><g/><g/><g/></g></svg>