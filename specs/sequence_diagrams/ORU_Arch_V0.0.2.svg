<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1645" height="1824"><desc>title%20Optimistic%20Rollup%20Architecture%20Draft%20V0.0.2%0A%0Aparticipant%20Alice%0Aparticipant%20Bob%0Aparticipant%20Smart%20Contract%0Aparticipant%20Sequencer%0Aparticipant%20Verifier%0A%0A%0A%0AAlice-%3ESmart%20Contract%3Adeposit%20ETH%20**deposit()**%20(L1)%0ASmart%20Contract-%3ESequencer%3A%20emit%20**Deposit()**%0A%0ABob-%3ESmart%20Contract%3A%20deposit%20ETH%20**deposit()**%20(L1)%0ASmart%20Contract-%3ESequencer%3A%20emit%20**Deposit()**%0A%0A%0Anote%20left%20of%20Smart%20Contract%3Aafter%20few%20mins%20balances%20available%20in%20L2%0A%0AAlice--%3E%3ESequencer%3A%20transfer%20money%20**transfer(_to%2C%20_amount)**%20(L2)%0ASequencer--%3E%3EAlice%3A%20Response%20with%20Tx%20**PENDING**%20state%0A%0ABob--%3E%3ESequencer%3A%20transfer%20money%20**transfer(_to%2C%20_amount)**%20(L2)%0ASequencer--%3E%3EBob%3A%20Response%20with%20Tx%20**PENDING**%20state%0A%0A%0Anote%20over%20Sequencer%3A%20Lock%20Tx%20Block%0Anote%20over%20Sequencer%3A%20Sequencer%20get%20the%20transactions%20in%20the%20mempool%20as%20recieved%3B%0Anote%20over%20Sequencer%3A%201.%20Validate%20Txs.%0ABob--%3E%3ESequencer%3A%20check%20Tx%20status%20**status(_txId)**%20(L2)%0ASequencer--%3E%3EBob%3A%20Response%20with%20Tx%20**ACCEPTED_IN_L2**%20state%3A%20soft%20finality%0A%0Anote%20over%20Sequencer%3A%202.%20Sequence%20Txs.%0Anote%20over%20Sequencer%3A%203.%20Execute%20Txs.%0Anote%20over%20Sequencer%3A%204.%20Generate%20the%20State%20Root%20(Merkle%20Tree).%0A%0ASequencer-%3ESmart%20Contract%3A%20Sequenced%20Batch%20Submission.%20Compressed%20Txs%2C%20transaction%20Root%20and%20State%20Root.%0A%0ASmart%20Contract-%3EVerifier%3A%20emit%20Compressed%20Txs%20and%5Cn%20State%20Root%20of%20latest%20Block.%0A%0A%0Anote%20left%20of%20Verifier%3A%20Verifier%20decompress%20the%20Tx%20bundle%20then%20execute%20them%20in%20the%20order%2C%5Cn%20against%20his%20previous%20state%20root%20and%20account%20balances.%0Anote%20left%20of%20Verifier%3A%20If%20he%20finds%20a%20malicious%20Tx%20aka%20a%20different%20State%20Root%2C%5Cn%20he%20challenge%20the%20submitted%20block%20by%20the%20sequencer.%0ASmart%20Contract%3C-Verifier%3A%20Challenge%20**challenge(_newStateRoot%2C%20_balances%2C%20_txs)**%0Anote%20over%20Smart%20Contract%3A%20Smart%20Contract%20recreate%20the%20State%20Root%20with%20_balances%20and%20_txs%0A%0ASmart%20Contract-%3ESequencer%3A%20emit%20Resolution(Correct%20State%20Root)%0ASmart%20Contract-%3EVerifier%3A%20emit%20Resolution(Correct%20State%20Root)%0A%0AAlice--%3E%3ESequencer%3A%20Withdraw%20money%20**withdraw(_amount)**%0ASequencer-%3ESmart%20Contract%3A%20Sequenced%20Batch%20Submission%0A%0AAlice--%3E%3ESequencer%3A%20get%20withdrawal%20proof%20**getProof(txId)**%0AAlice%3C%3C--Sequencer%3A%20returns%20txHash%20and%20Proof%20for%20it.%0Anote%20left%20of%20Sequencer%3A%20After%20a%20successful%20challenge%20period%20the%20batch%5Cn%20inclusive%20of%20Alice's%20withdrawal%20gets%20finalized%20in%20L1.%0AAlice-%3ESmart%20Contract%3A%20withdraw%20from%20L1%20**withdraw(_txHash%2C%20_proof)**%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1645" height="1824"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="616.819012900041" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Optimistic Rollup Architecture Draft V0.0.2</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 95.887643371 L 41.77890099026563 1824.152152511" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 95.887643371 L 213.44462432744012 1824.152152511" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 95.887643371 L 527.3221535813072 1824.152152511" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 95.887643371 L 1106.258245031047 1824.152152511" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1596.971666008547 95.887643371 L 1596.971666008547 1824.152152511" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 51.782594461 L 75.39020033053126 51.782594461 L 75.39020033053126 95.887643371 L 8.167601650000002 95.887643371 L 8.167601650000002 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.891297230500008" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 182.67870004820966 51.782594461 L 244.2105486066706 51.782594461 L 244.2105486066706 95.887643371 L 182.67870004820966 95.887643371 L 182.67870004820966 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="200.40239562870966" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 460.31071538606113 51.782594461 L 594.3335917765534 51.782594461 L 594.3335917765534 95.887643371 L 460.31071538606113 95.887643371 L 460.31071538606113 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="478.03441096656115" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Smart Contract</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1053.0800206419533 51.782594461 L 1159.4364694201408 51.782594461 L 1159.4364694201408 95.887643371 L 1053.0800206419533 95.887643371 L 1053.0800206419533 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1070.8037162224532" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1556.4348219295118 51.782594461 L 1637.5085100875822 51.782594461 L 1637.5085100875822 95.887643371 L 1556.4348219295118 95.887643371 L 1556.4348219295118 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1574.1585175100117" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier</text></g></g><g><g><g><rect fill="white" stroke="none" x="193.71444356813018" y="128.558049971" width="181.6721674353125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.16472406313017" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit ETH </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="280.9034325592239" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="342.79318780824735" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 149.793814261 L 513.8728361976406 149.793814261" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,149.793814261) translate(-527.3221535813072,-149.793814261)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 513.7094841646406 142.98747955266666 L 527.3221535813072 149.793814261 L 513.7094841646406 156.60014896933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="766.6949755738724" y="174.296619211" width="100.19044746460938" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="769.1452560688724" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="800.9133224751224" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Deposit()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 195.532383501 L 1092.8089276473802 195.532383501" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1106.258245031047,195.532383501) translate(-1106.258245031047,-195.532383501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1092.6455756143803 188.72604879266666 L 1106.258245031047 195.532383501 L 1092.6455756143803 202.33871820933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="279.5473052367174" y="220.035188451" width="181.6721674353125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="281.99758573171744" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit ETH </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="366.7362942278112" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="428.6260494768346" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 241.270952741 L 513.8728361976406 241.270952741" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,241.270952741) translate(-527.3221535813072,-241.270952741)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 513.7094841646406 234.46461803266666 L 527.3221535813072 241.270952741 L 513.7094841646406 248.07728744933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="766.6949755738724" y="265.77375769099996" width="100.19044746460938" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="769.1452560688724" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="800.9133224751224" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Deposit()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 287.009521981 L 1092.8089276473802 287.009521981" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1106.258245031047,287.009521981) translate(-1106.258245031047,-287.009521981)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1092.6455756143803 280.20318727266664 L 1106.258245031047 287.009521981 L 1092.6455756143803 293.8158566893333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 330.29781072599997 L 519.1545519313072 330.29781072599997 M 221.61222597744006 311.51232693099996 L 504.4528689613072 311.51232693099996 L 519.1545519313072 326.21400990099994 L 519.1545519313072 349.08329452099997 L 221.61222597744006 349.08329452099997 L 221.61222597744006 311.51232693099996 M 504.4528689613072 311.51232693099996 L 504.4528689613072 326.21400990099994 L 519.1545519313072 326.21400990099994" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="244.4815105974401" y="334.38161155099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">after few mins balances available in L2</text></g><g><g><rect fill="white" stroke="none" x="427.78523434915235" y="373.58609947099995" width="292.4666773230078" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="430.23551484415236" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer money </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="532.0822860843867" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer(_to, _amount)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="687.6584884769649" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 394.821863761 L 1104.216344618547 394.821863761" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1106.258245031047,394.821863761) translate(-1106.258245031047,-394.821863761)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1092.2630006479928 388.5784662753765 L 1104.7279451654974 394.821863761 L 1092.2630006479928 401.06526124662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="459.95055569925" y="419.32466871099996" width="228.1360346228125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.40083619425" y="434.02635168099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with Tx </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="582.9877807743281" y="434.02635168099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PENDING</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="649.7809173710078" y="434.02635168099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> state</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 440.560433001 L 43.82080140276563 440.560433001" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(41.77890099026563,440.560433001) translate(-41.77890099026563,-440.560433001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 55.77414537331967 434.3170355153765 L 43.309200855815114 440.560433001 L 55.77414537331967 446.80383048662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="513.6180960177396" y="465.06323795099996" width="292.4666773230078" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="516.0683765127396" y="479.76492092099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer money </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="617.915147752974" y="479.76492092099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer(_to, _amount)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="773.4913501455521" y="479.76492092099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 486.299002241 L 1104.216344618547 486.299002241" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1106.258245031047,486.299002241) translate(-1106.258245031047,-486.299002241)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1092.2630006479928 480.0556047553765 L 1104.7279451654974 486.299002241 L 1092.2630006479928 492.54239972662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="545.7834173678373" y="510.80180719099997" width="228.1360346228125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="548.2336978628373" y="525.503490161" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with Tx </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="668.8206424429154" y="525.503490161" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PENDING</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="735.6137790395951" y="525.503490161" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> state</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 532.037571481 L 215.48652473994014 532.037571481" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(213.44462432744012,532.037571481) translate(-213.44462432744012,-532.037571481)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 227.43986871049418 525.7941739953766 L 214.9749241929896 532.037571481 L 227.43986871049418 538.2809689666234" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1037.7662187118283 556.5403764309999 L 1160.0485883802658 556.5403764309999 L 1174.7502713502658 571.2420594009999 L 1174.7502713502658 594.1113440209999 L 1037.7662187118283 594.1113440209999 L 1037.7662187118283 556.5403764309999 M 1160.0485883802658 556.5403764309999 L 1160.0485883802658 571.2420594009999 L 1174.7502713502658 571.2420594009999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1060.6355033318282" y="579.409661051" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Lock Tx Block</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 888.2172685165158 618.6141489709998 L 1309.5975385755783 618.6141489709998 L 1324.2992215455783 633.3158319409998 L 1324.2992215455783 656.1851165609999 L 888.2172685165158 656.1851165609999 L 888.2172685165158 618.6141489709998 M 1309.5975385755783 618.6141489709998 L 1309.5975385755783 633.3158319409998 L 1324.2992215455783 633.3158319409998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="911.0865531365157" y="641.4834335909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer get the transactions in the mempool as recieved;</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1033.4140306014767 680.6879215109998 L 1164.4007764906173 680.6879215109998 L 1179.1024594606174 695.3896044809998 L 1179.1024594606174 718.2588891009998 L 1033.4140306014767 718.2588891009998 L 1033.4140306014767 680.6879215109998 M 1164.4007764906173 680.6879215109998 L 1164.4007764906173 695.3896044809998 L 1179.1024594606174 695.3896044809998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1056.2833152214766" y="703.5572061309998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Validate Txs.</text></g><g><g><rect fill="white" stroke="none" x="545.7941900729154" y="742.7616940509997" width="228.11448921265625" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="548.2444705679154" y="757.4633770209997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check Tx status </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="654.1570987417435" y="757.4633770209997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">status(_txId)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="741.3152560903764" y="757.4633770209997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 213.44462432744012 763.9974583409997 L 1104.216344618547 763.9974583409997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1106.258245031047,763.9974583409997) translate(-1106.258245031047,-763.9974583409997)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1092.2630006479928 757.7540608553763 L 1104.7279451654974 763.9974583409997 L 1092.2630006479928 770.2408558266231" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="476.12345185270055" y="788.5002632909997" width="367.4559656530859" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="478.57373234770057" y="803.2019462609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with Tx </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="599.1606769277787" y="803.2019462609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ACCEPTED_IN_L2</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="727.8722095205521" y="803.2019462609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> state: soft finality</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 809.7360275809997 L 215.48652473994014 809.7360275809997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(213.44462432744012,809.7360275809997) translate(-213.44462432744012,-809.7360275809997)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 227.43986871049418 803.4926300953763 L 214.9749241929896 809.7360275809997 L 227.43986871049418 815.9794250666231" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1026.3453126449338 834.2388325309996 L 1171.4694944471603 834.2388325309996 L 1186.1711774171604 848.9405155009996 L 1186.1711774171604 871.8098001209996 L 1026.3453126449338 871.8098001209996 L 1026.3453126449338 834.2388325309996 M 1171.4694944471603 834.2388325309996 L 1171.4694944471603 848.9405155009996 L 1186.1711774171604 848.9405155009996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1049.2145972649337" y="857.1081171509996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. Sequence Txs.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1032.8735871810666 896.3126050709996 L 1164.9412199110275 896.3126050709996 L 1179.6429028810276 911.0142880409995 L 1179.6429028810276 933.8835726609996 L 1032.8735871810666 933.8835726609996 L 1032.8735871810666 896.3126050709996 M 1164.9412199110275 896.3126050709996 L 1164.9412199110275 911.0142880409995 L 1179.6429028810276 911.0142880409995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1055.7428718010665" y="919.1818896909996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. Execute Txs.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 947.9952989120236 958.3863776109995 L 1249.8195081800704 958.3863776109995 L 1264.5211911500705 973.0880605809995 L 1264.5211911500705 995.9573452009995 L 947.9952989120236 995.9573452009995 L 947.9952989120236 958.3863776109995 M 1249.8195081800704 958.3863776109995 L 1249.8195081800704 973.0880605809995 L 1264.5211911500705 973.0880605809995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="970.8645835320235" y="981.2556622309995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. Generate the State Root (Merkle Tree).</text></g><g><g><rect fill="white" stroke="none" x="546.652144152974" y="1020.4601501509995" width="540.2761103064063" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="549.102424647974" y="1035.1618331209995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequenced Batch Submission. Compressed Txs, transaction Root and State Root.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 1041.6959144409996 L 540.7714709649739 1041.6959144409996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1041.6959144409996) translate(-527.3221535813072,-1041.6959144409996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 540.9348229979739 1034.8895797326663 L 527.3221535813072 1041.6959144409996 L 540.9348229979739 1048.5022491493328 Z"/></g></g><g><g><rect fill="white" stroke="none" x="973.3222854278567" y="1066.1987193909995" width="175.99571479859375" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="973.3222854278567" y="1082.5339226909996" width="177.64924873414063" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="975.7725659228568" y="1080.9004023609996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit Compressed Txs and</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="975.7725659228568" y="1097.2356056609997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> State Root of latest Block.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 1103.7696869809995 L 1583.5223486248801 1103.7696869809995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1596.971666008547,1103.7696869809995) translate(-1596.971666008547,-1103.7696869809995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1583.3589965918802 1096.9633522726663 L 1596.971666008547 1103.7696869809995 L 1583.3589965918802 1110.5760216893327 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1596.971666008547 1155.2255773759996 L 1588.8040643585468 1155.2255773759996 M 1114.425846681047 1128.2724919309994 L 1574.102381388547 1128.2724919309994 L 1588.804064358547 1142.9741749009995 L 1588.804064358547 1182.1786628209995 L 1114.425846681047 1182.1786628209995 L 1114.425846681047 1128.2724919309994 M 1574.102381388547 1128.2724919309994 L 1574.102381388547 1142.9741749009995 L 1588.804064358547 1142.9741749009995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1137.295131301047" y="1151.1417765509998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier decompress the Tx bundle then execute them in the order,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1137.295131301047" y="1167.476979851" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> against his previous state root and account balances.</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1596.971666008547 1233.6345532159996 L 1588.8040643585468 1233.6345532159996 M 1205.6640668958908 1206.6814677709995 L 1574.102381388547 1206.6814677709995 L 1588.804064358547 1221.3831507409996 L 1588.804064358547 1260.5876386609996 L 1205.6640668958908 1260.5876386609996 L 1205.6640668958908 1206.6814677709995 M 1574.102381388547 1206.6814677709995 L 1574.102381388547 1221.3831507409996 L 1588.804064358547 1221.3831507409996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1228.5333515158907" y="1229.5507523909998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If he finds a malicious Tx aka a different State Root,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1228.5333515158907" y="1245.885955691" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> he challenge the submitted block by the sequencer.</text></g><g><g><rect fill="white" stroke="none" x="874.7431914947513" y="1285.0904436109997" width="374.80743660035154" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="877.1934719897513" y="1299.7921265809998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Challenge </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="947.2865048266654" y="1299.7921265809998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">challenge(_newStateRoot, _balances, _txs)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1596.971666008547 1306.3262079009996 L 540.7714709649739 1306.3262079009996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1306.3262079009996) translate(-527.3221535813072,-1306.3262079009996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 540.9348229979739 1299.5198731926664 L 527.3221535813072 1306.3262079009996 L 540.9348229979739 1313.1325426093329 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 297.06929352185415 1330.8290128509996 L 742.8733306707604 1330.8290128509996 L 757.5750136407604 1345.5306958209997 L 757.5750136407604 1368.3999804409996 L 297.06929352185415 1368.3999804409996 L 297.06929352185415 1330.8290128509996 M 742.8733306707604 1330.8290128509996 L 742.8733306707604 1345.5306958209997 L 757.5750136407604 1345.5306958209997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="319.9385781418541" y="1353.6982974709997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Smart Contract recreate the State Root with _balances and _txs</text></g><g><g><rect fill="white" stroke="none" x="698.2376010011185" y="1392.9027853909997" width="237.1051966101172" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="700.6878814961185" y="1407.6044683609998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit Resolution(Correct State Root)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 1414.1385496809996 L 1092.8089276473802 1414.1385496809996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1106.258245031047,1414.1385496809996) translate(-1106.258245031047,-1414.1385496809996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1092.6455756143803 1407.3322149726664 L 1106.258245031047 1414.1385496809996 L 1092.6455756143803 1420.9448843893329 Z"/></g></g><g><g><rect fill="white" stroke="none" x="943.5943114898685" y="1438.6413546309998" width="237.1051966101172" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="946.0445919848685" y="1453.3430376009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit Resolution(Correct State Root)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 527.3221535813072 1459.8771189209997 L 1583.5223486248801 1459.8771189209997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1596.971666008547,1459.8771189209997) translate(-1596.971666008547,-1459.8771189209997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1583.3589965918802 1453.0707842126665 L 1596.971666008547 1459.8771189209997 L 1583.3589965918802 1466.683453629333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="447.7565630845039" y="1484.3799238709998" width="252.5240198523047" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="450.2068435795039" y="1499.081606841" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Withdraw money </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="563.4494735843867" y="1499.081606841" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw(_amount)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 1505.6156881609998 L 1104.216344618547 1505.6156881609998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1106.258245031047,1505.6156881609998) translate(-1106.258245031047,-1505.6156881609998)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1092.2630006479928 1499.3722906753765 L 1104.7279451654974 1505.6156881609998 L 1092.2630006479928 1511.859085646623" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="716.5446841310013" y="1530.118493111" width="200.49103035035156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="718.9949646260013" y="1544.820176081" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequenced Batch Submission</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 1551.3542574009998 L 540.7714709649739 1551.3542574009998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1551.3542574009998) translate(-527.3221535813072,-1551.3542574009998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 540.9348229979739 1544.5479226926666 L 527.3221535813072 1551.3542574009998 L 540.9348229979739 1558.160592109333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="455.888299839875" y="1575.857062351" width="236.2605463415625" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="458.338580334875" y="1590.558745321" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">get withdrawal proof </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="593.6069671756953" y="1590.558745321" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getProof(txId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 1597.0928266409999 L 1104.216344618547 1597.0928266409999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1106.258245031047,1597.0928266409999) translate(-1106.258245031047,-1597.0928266409999)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1092.2630006479928 1590.8494291553766 L 1104.7279451654974 1597.0928266409999 L 1092.2630006479928 1603.3362241266232" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="471.75444974221875" y="1621.595631591" width="204.528246536875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="474.20473023721877" y="1636.2973145610001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">returns txHash and Proof for it.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 1642.831395881 L 43.82080140276563 1642.831395881" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(41.77890099026563,1642.831395881) translate(-41.77890099026563,-1642.831395881)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 55.77414537331967 1636.5879983953766 L 43.309200855815114 1642.831395881 L 55.77414537331967 1649.0747933666232" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1106.258245031047 1694.287286276 L 1098.090643381047 1694.287286276 M 726.8762440629221 1667.334200831 L 1083.388960411047 1667.334200831 L 1098.0906433810471 1682.0358838010002 L 1098.0906433810471 1721.240371721 L 726.8762440629221 1721.240371721 L 726.8762440629221 1667.334200831 M 1083.388960411047 1667.334200831 L 1083.388960411047 1682.0358838010002 L 1098.0906433810471 1682.0358838010002" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="749.745528682922" y="1690.2034854510002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">After a successful challenge period the batch</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="749.745528682922" y="1706.5386887510003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> inclusive of Alice's withdrawal gets finalized in L1.</text></g><g><g><rect fill="white" stroke="none" x="132.21479452027862" y="1745.7431766710001" width="304.6714655310156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="134.6650750152786" y="1760.4448596410002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw from L1 </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="250.35580987855985" y="1760.4448596410002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw(_txHash, _proof)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 41.77890099026563 1766.978940961 L 513.8728361976406 1766.978940961" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(527.3221535813072,1766.978940961) translate(-527.3221535813072,-1766.978940961)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 513.7094841646406 1760.1726062526668 L 527.3221535813072 1766.978940961 L 513.7094841646406 1773.7852756693333 Z"/></g></g></g><g/><g/><g/><g/><g/></g></svg>