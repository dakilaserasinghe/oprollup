<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1832" height="1824"><desc>title%20Optimistic%20Rollup%20Architecture%20V1.0.0%0A%0Aparticipant%20Alice%0Aparticipant%20Bob%0Aparticipant%20Smart%20Contract%0Aparticipant%20Sequencer%0Aparticipant%20Verifier%0A%0A%0A%0AAlice-%3ESmart%20Contract%3Adeposit%20ETH%20**deposit()**%20(L1)%0ASmart%20Contract-%3ESequencer%3A%20emit%20**Deposited()**%0A%0ABob-%3ESmart%20Contract%3A%20deposit%20ETH%20**deposit()**%20(L1)%0ASmart%20Contract-%3ESequencer%3A%20emit%20**Deposited()**%0A%0A%0Anote%20left%20of%20Smart%20Contract%3Aafter%20few%20mins%20balances%20available%20in%20L2%0A%0AAlice--%3E%3ESequencer%3A%20initiate%20L2%20transfer%20**l2transfer(_target%2C%20_value%2C%20_nonce)**%20(L2)%0Anote%20over%20Sequencer%3A%20Transaction%20added%20in%20the%20sequencer%20mempool%0ASequencer--%3E%3EAlice%3A%20Response%20with%20transaction%20statue%3A%20**PENDING**%0A%0ABob--%3E%3ESequencer%3A%20L2%20transfer%20**l2transfer(_target%2C%20_value%2C%20_nonce)**%20(L2)%0ASequencer--%3E%3EBob%3A%20Response%20with%20transaction%20statue%3A%20**PENDING**%0A%0A%0A%2F%2Fnote%20over%20Sequencer%3A%20Lock%20Tx%20Block%0Anote%20over%20Sequencer%3A%20Sequencer%20get%20the%20transactions%20in%20the%20mempool%20as%20recieved%0A%23%20Bob--%3E%3ESequencer%3A%20check%20transaction%20status%20**l2status(_txId)**%20(L2)%0A%23%20Sequencer--%3E%3EBob%3A%20Response%20with%20status%3A%20**ACCEPTED_IN_L2**%0A%0Anote%20over%20Sequencer%3A%20sequencer%20create%20a%20batch%20of%20transactions%2C%5Cn%20execute%20the%20batch%20and%20sequence%20the%20valid%20transactions%0Anote%20over%20Sequencer%3A%20Then%20it%20generates%20the%20state%20root%20and%20compress%20the%20sequenced%20batch%0A%0ASequencer-%3ESmart%20Contract%3A%20Sequencer%20submits%20sequenced%20batch%20in%20layer%201%20appendSequencerBatch()%0ASmart%20Contract-%3EVerifier%3A%20emit%20SequencedBatch(_batchId)%20with%20batch%20Id.%0A%0AAlice--%3E%3ESequencer%3A%20check%20transaction%20status%20**l2status(_txid)**%0ASequencer--%3E%3EAlice%3A%20status%20%3A%20**ACCEPTED_IN_L1**%0A%0Anote%20left%20of%20Verifier%3A%20Verifier%20listens%20to%20the%20'SequencedBatch'%20event.%20Extracts%20calldata%20for%20transaction%0Anote%20left%20of%20Verifier%3A%20Verifier%20decompress%20the%20Tx%20bundle%20then%20execute%20them%20in%20the%20order%0Anote%20left%20of%20Verifier%3A%20If%20he%20finds%20a%20malicious%20tx%20aka%20a%20different%20pre-state%2Fpost-state%2Ftransaction%20root%2C%5Cn%20he%20challenges%20the%20submitted%20block%20by%20the%20sequencer.%0ASmart%20Contract%3C-Verifier%3A%20Challenge%20**verifyTransactions()**%0Anote%20over%20Smart%20Contract%3A%20Smart%20Contract%20recreate%20the%20State%20Root%20in%20layer%201%0A%0ASmart%20Contract-%3ESequencer%3A%20emit%20InvalidBatch(_batchId)%0Anote%20over%20Smart%20Contract%3A%20If%20verifier%20wins%20the%20challenge%2C%20sequencer%20will%20be%20slashed%20and%20verifier%20is%20rewarded.%0A%0AAlice--%3E%3ESequencer%3A%20Withdraw%20in%20L2%20**l2withdraw(_value%2C%20_nonce)**%20(L2)%0ASequencer-%3ESmart%20Contract%3A%20Sequenced%20Batch%20Submission%20appendSequencerBatch()%0A%0A%23%20Alice--%3E%3ESequencer%3A%20get%20withdrawal%20proof%20**getProof(txId)**%0A%23%20Alice%3C%3C--Sequencer%3A%20returns%20txHash%20and%20Proof%20for%20it.%0Anote%20left%20of%20Sequencer%3A%20After%20a%20successful%20challenge%20period%20the%20batch%5Cn%20inclusive%20of%20Alice's%20withdrawal%20gets%20finalized%20in%20L1.%0AAlice--%3E%3ESequencer%3A%20check%20withdraw%20tx%20status%20**l2status(_txid)**%0ASequencer--%3E%3EAlice%3A%20status%20%3A%20**FINALIZED**%0AAlice-%3ESmart%20Contract%3A%20withdraw%20from%20L1%20**l1withdraw(_txid)**%20(L1)%0Anote%20over%20Alice%3A%20Alice's%20l1withdraw%20is%20executed%20and%20eth%20is%20received%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1832" height="1824"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="737.2570458686256" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Optimistic Rollup Architecture V1.0.0</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 95.887643371 L 191.33385282273437 1824.1521525109997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 382.66770564546874 95.887643371 L 382.66770564546874 1824.1521525109997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 696.5452348993359 95.887643371 L 696.5452348993359 1824.1521525109997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 95.887643371 L 1216.04684758931 1824.1521525109997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1784.061599133216 95.887643371 L 1784.061599133216 1824.1521525109997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 157.72255348246875 51.782594461 L 224.94515216300002 51.782594461 L 224.94515216300002 95.887643371 L 157.72255348246875 95.887643371 L 157.72255348246875 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="175.44624906296875" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 351.90178136623825 51.782594461 L 413.4336299246992 51.782594461 L 413.4336299246992 95.887643371 L 351.90178136623825 95.887643371 L 351.90178136623825 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="369.6254769467383" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 629.5337967040898 51.782594461 L 763.556673094582 51.782594461 L 763.556673094582 95.887643371 L 629.5337967040898 95.887643371 L 629.5337967040898 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="647.2574922845898" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Smart Contract</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1162.8686232002162 51.782594461 L 1269.2250719784038 51.782594461 L 1269.2250719784038 95.887643371 L 1162.8686232002162 95.887643371 L 1162.8686232002162 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1180.5923187807161" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1743.524755054181 51.782594461 L 1824.5984432122514 51.782594461 L 1824.5984432122514 95.887643371 L 1743.524755054181 95.887643371 L 1743.524755054181 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1761.248450634681" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier</text></g></g><g><g><g><rect fill="white" stroke="none" x="353.1034601433789" y="128.558049971" width="181.6721674353125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="355.55374063837894" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit ETH </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="440.2924491344727" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="502.1822043834961" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 149.793814261 L 683.0959175156693 149.793814261" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(696.5452348993359,149.793814261) translate(-696.5452348993359,-149.793814261)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 682.9325654826692 142.98747955266666 L 696.5452348993359 149.793814261 L 682.9325654826692 156.60014896933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="897.6467708811588" y="174.296619211" width="117.29854072632813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="900.0970513761588" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="931.8651177824088" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Deposited()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 696.5452348993359 195.532383501 L 1202.5975302056431 195.532383501" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1216.04684758931,195.532383501) translate(-1216.04684758931,-195.532383501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1202.4341781726432 188.72604879266666 L 1216.04684758931 195.532383501 L 1202.4341781726432 202.33871820933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="448.7703865547461" y="220.035188451" width="181.6721674353125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="451.2206670497461" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit ETH </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="535.9593755458399" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">deposit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="597.8491307948633" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 382.66770564546874 241.270952741 L 683.0959175156693 241.270952741" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(696.5452348993359,241.270952741) translate(-696.5452348993359,-241.270952741)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 682.9325654826692 234.46461803266666 L 696.5452348993359 241.270952741 L 682.9325654826692 248.07728744933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="897.6467708811588" y="265.77375769099996" width="117.29854072632813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="900.0970513761588" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="931.8651177824088" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Deposited()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 696.5452348993359 287.009521981 L 1202.5975302056431 287.009521981" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1216.04684758931,287.009521981) translate(-1216.04684758931,-287.009521981)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1202.4341781726432 280.20318727266664 L 1216.04684758931 287.009521981 L 1202.4341781726432 293.8158566893333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 696.5452348993359 330.29781072599997 L 688.3776332493359 330.29781072599997 M 390.83530729546874 311.51232693099996 L 673.675950279336 311.51232693099996 L 688.377633249336 326.21400990099994 L 688.377633249336 349.08329452099997 L 390.83530729546874 349.08329452099997 L 390.83530729546874 311.51232693099996 M 673.675950279336 311.51232693099996 L 673.675950279336 326.21400990099994 L 688.377633249336 326.21400990099994" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="413.70459191546877" y="334.38161155099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">after few mins balances available in L2</text></g><g><g><rect fill="white" stroke="none" x="506.5085709927604" y="373.58609947099995" width="394.3635584265234" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="508.9588514877604" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">initiate L2 transfer </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="629.560078294401" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">l2transfer(_target, _value, _nonce)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="868.2787062240885" y="388.28778244099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 394.821863761 L 1214.00494717681 394.821863761" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1216.04684758931,394.821863761) translate(-1216.04684758931,-394.821863761)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1202.0516032062558 388.5784662753765 L 1214.5165477237604 394.821863761 L 1202.0516032062558 401.06526124662344" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1044.315777080638 419.32466871099996 L 1373.0762351279818 419.32466871099996 L 1387.777918097982 434.02635168099994 L 1387.777918097982 456.89563630099997 L 1044.315777080638 456.89563630099997 L 1044.315777080638 419.32466871099996 M 1373.0762351279818 419.32466871099996 L 1373.0762351279818 434.02635168099994 L 1387.777918097982 434.02635168099994" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1067.185061700638" y="442.19395333099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Transaction added in the sequencer mempool</text></g><g><g><rect fill="white" stroke="none" x="555.7962983487174" y="481.39844125099995" width="295.78810371460935" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="558.2465788437174" y="496.10012422099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with transaction statue: </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="782.3409849716471" y="496.10012422099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PENDING</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 502.634205541 L 193.37575323523438 502.634205541" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(191.33385282273437,502.634205541) translate(-191.33385282273437,-502.634205541)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 205.32909720578843 496.3908080553765 L 192.86415268828384 502.634205541 L 205.32909720578843 508.87760302662343" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="625.4002517376236" y="527.137010491" width="347.9140497595312" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="627.8505322326237" y="541.8386934609999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">L2 transfer </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="702.0022503722721" y="541.8386934609999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">l2transfer(_target, _value, _nonce)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="940.7208783019596" y="541.8386934609999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 382.66770564546874 548.372774781 L 1214.00494717681 548.372774781" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1216.04684758931,548.372774781) translate(-1216.04684758931,-548.372774781)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1202.0516032062558 542.1293772953766 L 1214.5165477237604 548.372774781 L 1202.0516032062558 554.6161722666234" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="651.4632247600846" y="572.8755797309999" width="295.78810371460935" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="653.9135052550846" y="587.5772627009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response with transaction statue: </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="878.0079113830143" y="587.5772627009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PENDING</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 594.1113440209999 L 384.70960605796876 594.1113440209999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(382.66770564546874,594.1113440209999) translate(-382.66770564546874,-594.1113440209999)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 396.6629500285228 587.8679465353765 L 384.1980055110182 594.1113440209999 L 396.6629500285228 600.3547415066233" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1000.0423700982162 618.6141489709998 L 1417.3496421104037 618.6141489709998 L 1432.0513250804038 633.3158319409998 L 1432.0513250804038 656.1851165609999 L 1000.0423700982162 656.1851165609999 L 1000.0423700982162 618.6141489709998 M 1417.3496421104037 618.6141489709998 L 1417.3496421104037 633.3158319409998 L 1432.0513250804038 633.3158319409998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1022.9116547182161" y="641.4834335909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer get the transactions in the mempool as recieved</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1014.2871515923568 680.6879215109999 L 1403.104860616263 680.6879215109999 L 1417.8065435862632 695.3896044809999 L 1417.8065435862632 734.5940924009999 L 1014.2871515923568 734.5940924009999 L 1014.2871515923568 680.6879215109999 M 1403.104860616263 680.6879215109999 L 1403.104860616263 695.3896044809999 L 1417.8065435862632 695.3896044809999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1037.1564362123568" y="703.5572061309999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sequencer create a batch of transactions,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1037.1564362123568" y="719.8924094309999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> execute the batch and sequence the valid transactions</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 973.1382868462631 759.0968973509998 L 1444.2537253623568 759.0968973509998 L 1458.955408332357 773.7985803209998 L 1458.955408332357 796.6678649409998 L 973.1382868462631 796.6678649409998 L 973.1382868462631 759.0968973509998 M 1444.2537253623568 759.0968973509998 L 1444.2537253623568 773.7985803209998 L 1458.955408332357 773.7985803209998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="996.007571466263" y="781.9661819709999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Then it generates the state root and compress the sequenced batch</text></g><g><g><rect fill="white" stroke="none" x="715.8752254710025" y="821.1706698909998" width="480.8416315466406" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="718.3255059660025" y="835.8723528609997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequencer submits sequenced batch in layer 1 appendSequencerBatch()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 842.4064341809998 L 709.9945522830026 842.4064341809998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(696.5452348993359,842.4064341809998) translate(-696.5452348993359,-842.4064341809998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 710.1579043160026 835.6000994726664 L 696.5452348993359 842.4064341809998 L 710.1579043160026 849.2127688893331 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1087.906877976354" y="866.9092391309997" width="304.7930780798437" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1090.357158471354" y="881.6109221009997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit SequencedBatch(_batchId) with batch Id.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 696.5452348993359 888.1450034209997 L 1770.6122817495493 888.1450034209997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1784.061599133216,888.1450034209997) translate(-1784.061599133216,-888.1450034209997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1770.4489297165494 881.3386687126664 L 1784.061599133216 888.1450034209997 L 1770.4489297165494 894.9513381293331 Z"/></g></g><g><g><rect fill="white" stroke="none" x="570.8786424038932" y="912.6478083709997" width="265.6234156042578" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="573.3289228988932" y="927.3494913409996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check transaction status </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="734.6674238754557" y="927.3494913409996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">l2status(_txid)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 933.8835726609997 L 1214.00494717681 933.8835726609997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1216.04684758931,933.8835726609997) translate(-1216.04684758931,-933.8835726609997)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1202.0516032062558 927.6401751753763 L 1214.5165477237604 933.8835726609997 L 1202.0516032062558 940.1269701466231" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="611.2186005948112" y="958.3863776109996" width="184.94349922242188" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="613.6688810898112" y="973.0880605809996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">status : </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="665.0002867294596" y="973.0880605809996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ACCEPTED_IN_L1</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 979.6221419009996 L 193.37575323523438 979.6221419009996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(191.33385282273437,979.6221419009996) translate(-191.33385282273437,-979.6221419009996)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 205.32909720578843 973.3787444153762 L 192.86415268828384 979.6221419009996 L 205.32909720578843 985.865539386623" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1784.061599133216 1022.9104306459996 L 1775.893997483216 1022.9104306459996 M 1224.21444923931 1004.1249468509995 L 1761.192314513216 1004.1249468509995 L 1775.893997483216 1018.8266298209995 L 1775.893997483216 1041.6959144409996 L 1224.21444923931 1041.6959144409996 L 1224.21444923931 1004.1249468509995 M 1761.192314513216 1004.1249468509995 L 1761.192314513216 1018.8266298209995 L 1775.893997483216 1018.8266298209995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1247.0837338593099" y="1026.9942314709997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier listens to the 'SequencedBatch' event. Extracts calldata for transaction</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1784.061599133216 1084.9842031859996 L 1775.893997483216 1084.9842031859996 M 1304.77987892681 1066.1987193909995 L 1761.1923145132162 1066.1987193909995 L 1775.8939974832163 1080.9004023609996 L 1775.8939974832163 1103.7696869809995 L 1304.77987892681 1103.7696869809995 L 1304.77987892681 1066.1987193909995 M 1761.1923145132162 1066.1987193909995 L 1761.1923145132162 1080.9004023609996 L 1775.8939974832163 1080.9004023609996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1327.6491635468099" y="1089.0680040109996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verifier decompress the Tx bundle then execute them in the order</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1784.061599133216 1155.2255773759996 L 1775.893997483216 1155.2255773759996 M 1237.4355185752474 1128.2724919309994 L 1761.192314513216 1128.2724919309994 L 1775.893997483216 1142.9741749009995 L 1775.893997483216 1182.1786628209995 L 1237.4355185752474 1182.1786628209995 L 1237.4355185752474 1128.2724919309994 M 1761.192314513216 1128.2724919309994 L 1761.192314513216 1142.9741749009995 L 1775.893997483216 1142.9741749009995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1260.3048031952474" y="1151.1417765509998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If he finds a malicious tx aka a different pre-state/post-state/transaction root,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1260.3048031952474" y="1167.476979851" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> he challenges the submitted block by the sequencer.</text></g><g><g><rect fill="white" stroke="none" x="1133.1466545876822" y="1206.6814677709997" width="214.3135248571875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1135.5969350826822" y="1221.3831507409998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Challenge </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="1205.6899679195963" y="1221.3831507409998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">verifyTransactions()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1784.061599133216 1227.9172320609996 L 709.9945522830026 1227.9172320609996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(696.5452348993359,1227.9172320609996) translate(-696.5452348993359,-1227.9172320609996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 710.1579043160026 1221.1108973526664 L 696.5452348993359 1227.9172320609996 L 710.1579043160026 1234.7235667693328 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 514.7855389023829 1252.4200370109995 L 863.6032479262891 1252.4200370109995 L 878.3049308962891 1267.1217199809996 L 878.3049308962891 1289.9910046009995 L 514.7855389023829 1289.9910046009995 L 514.7855389023829 1252.4200370109995 M 863.6032479262891 1252.4200370109995 L 863.6032479262891 1267.1217199809996 L 878.3049308962891 1267.1217199809996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="537.6548235223828" y="1275.2893216309997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Smart Contract recreate the State Root in layer 1</text></g><g><g><rect fill="white" stroke="none" x="865.0269054636783" y="1314.4938095509997" width="182.53827156128906" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="867.4771859586783" y="1329.1954925209998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">emit InvalidBatch(_batchId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 696.5452348993359 1335.7295738409996 L 1202.5975302056431 1335.7295738409996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1216.04684758931,1335.7295738409996) translate(-1216.04684758931,-1335.7295738409996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1202.4341781726432 1328.9232391326664 L 1216.04684758931 1335.7295738409996 L 1202.4341781726432 1342.5359085493328 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 414.9610454941797 1360.2323787909995 L 963.4277413344922 1360.2323787909995 L 978.1294243044922 1374.9340617609996 L 978.1294243044922 1397.8033463809995 L 414.9610454941797 1397.8033463809995 L 414.9610454941797 1360.2323787909995 M 963.4277413344922 1360.2323787909995 L 963.4277413344922 1374.9340617609996 L 978.1294243044922 1374.9340617609996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="437.8303301141797" y="1383.1016634109997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If verifier wins the challenge, sequencer will be slashed and verifier is rewarded.</text></g><g><g><rect fill="white" stroke="none" x="540.3381608365104" y="1422.3061513309997" width="326.7043787390234" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="542.7884413315104" y="1437.0078343009998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Withdraw in L2 </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="643.8191877914713" y="1437.0078343009998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">l2withdraw(_value, _nonce)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="834.4491163803385" y="1437.0078343009998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 1443.5419156209996 L 1214.00494717681 1443.5419156209996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1216.04684758931,1443.5419156209996) translate(-1216.04684758931,-1443.5419156209996)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1202.0516032062558 1437.2985181353763 L 1214.5165477237604 1443.5419156209996 L 1202.0516032062558 1449.7853131066229" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="770.4743313059635" y="1468.0447205709997" width="371.6434198767187" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="772.9246118009635" y="1482.7464035409998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sequenced Batch Submission appendSequencerBatch()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 1489.2804848609996 L 709.9945522830026 1489.2804848609996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(696.5452348993359,1489.2804848609996) translate(-696.5452348993359,-1489.2804848609996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 710.1579043160026 1482.4741501526664 L 696.5452348993359 1489.2804848609996 L 710.1579043160026 1496.0868195693329 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 1540.7363752559997 L 1207.8792459393098 1540.7363752559997 M 836.664846621185 1513.7832898109996 L 1193.17756296931 1513.7832898109996 L 1207.87924593931 1528.4849727809997 L 1207.87924593931 1567.6894607009997 L 836.664846621185 1567.6894607009997 L 836.664846621185 1513.7832898109996 M 1193.17756296931 1513.7832898109996 L 1193.17756296931 1528.4849727809997 L 1207.87924593931 1528.4849727809997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="859.5341312411849" y="1536.652574431" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">After a successful challenge period the batch</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="859.5341312411849" y="1552.987777731" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> inclusive of Alice's withdrawal gets finalized in L1.</text></g><g><g><rect fill="white" stroke="none" x="570.0733369229362" y="1592.1922656509998" width="267.23402656617185" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="572.5236174179362" y="1606.893948621" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">check withdraw tx status </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="735.4727293564127" y="1606.893948621" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">l2status(_txid)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 1613.4280299409997 L 1214.00494717681 1613.4280299409997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1216.04684758931,1613.4280299409997) translate(-1216.04684758931,-1613.4280299409997)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1202.0516032062558 1607.1846324553765 L 1214.5165477237604 1613.4280299409997 L 1202.0516032062558 1619.671427426623" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="637.299479806237" y="1637.930834891" width="132.78174079957031" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="639.749760301237" y="1652.632517861" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">status : </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="691.0811659408854" y="1652.632517861" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FINALIZED</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1216.04684758931 1659.1665991809998 L 193.37575323523438 1659.1665991809998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(191.33385282273437,1659.1665991809998) translate(-191.33385282273437,-1659.1665991809998)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 205.32909720578843 1652.9232016953765 L 192.86415268828384 1659.1665991809998 L 205.32909720578843 1665.409996666623" stroke-miterlimit="10" stroke-width="1.3612669416666667"/></g></g><g><g><rect fill="white" stroke="none" x="308.70475561457033" y="1683.669404131" width="270.46957649292966" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="311.15503610957035" y="1698.371087101" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">withdraw from L1 </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="426.8457709728516" y="1698.371087101" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">l1withdraw(_txid)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="546.5809089123047" y="1698.371087101" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> (L1)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 191.33385282273437 1704.9051684209999 L 683.0959175156693 1704.9051684209999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(696.5452348993359,1704.9051684209999) translate(-696.5452348993359,-1704.9051684209999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 682.9325654826692 1698.0988337126666 L 696.5452348993359 1704.9051684209999 L 682.9325654826692 1711.711503129333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.16760165 1729.4079733709998 L 359.79842102546877 1729.4079733709998 L 374.50010399546875 1744.109656341 L 374.50010399546875 1766.9789409609998 L 8.16760165 1766.9789409609998 L 8.16760165 1729.4079733709998 M 359.79842102546877 1729.4079733709998 L 359.79842102546877 1744.109656341 L 374.50010399546875 1744.109656341" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="31.036886269999997" y="1752.277257991" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice's l1withdraw is executed and eth is received</text></g></g><g/><g/><g/><g/><g/></g></svg>